
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ansible/">
      
      
        <link rel="next" href="../jenkins/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Docker - SZTE DevOps Course</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SZTE DevOps Course" class="md-header__button md-logo" aria-label="SZTE DevOps Course" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SZTE DevOps Course
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SZTE DevOps Course" class="md-nav__button md-logo" aria-label="SZTE DevOps Course" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SZTE DevOps Course
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../prereq/" class="md-nav__link">
        Előismeretek
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bash/" class="md-nav__link">
        Bash áttekintés
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../linux/" class="md-nav__link">
        Linux alapok
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../vagrant/" class="md-nav__link">
        Vagrant
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ansible/" class="md-nav__link">
        Ansible
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Docker
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kontener-vs-virtualis-gep" class="md-nav__link">
    Konténer vs. virtuális gép
  </a>
  
    <nav class="md-nav" aria-label="Konténer vs. virtuális gép">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osztott-kernel" class="md-nav__link">
    Osztott kernel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimal-os-distroless-kontener" class="md-nav__link">
    Minimal OS &amp; distroless konténer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#komponensek" class="md-nav__link">
    Komponensek
  </a>
  
    <nav class="md-nav" aria-label="Komponensek">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-halozat" class="md-nav__link">
    Docker hálózat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    Secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image" class="md-nav__link">
    Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folyamat" class="md-nav__link">
    Folyamat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker Compose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swarm" class="md-nav__link">
    Swarm
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../jenkins/" class="md-nav__link">
        Jenkins
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kontener-vs-virtualis-gep" class="md-nav__link">
    Konténer vs. virtuális gép
  </a>
  
    <nav class="md-nav" aria-label="Konténer vs. virtuális gép">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osztott-kernel" class="md-nav__link">
    Osztott kernel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimal-os-distroless-kontener" class="md-nav__link">
    Minimal OS &amp; distroless konténer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#komponensek" class="md-nav__link">
    Komponensek
  </a>
  
    <nav class="md-nav" aria-label="Komponensek">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-halozat" class="md-nav__link">
    Docker hálózat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume" class="md-nav__link">
    Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret" class="md-nav__link">
    Secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image" class="md-nav__link">
    Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folyamat" class="md-nav__link">
    Folyamat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker Compose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swarm" class="md-nav__link">
    Swarm
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">#</a></h1>
<h2 id="kontener-vs-virtualis-gep">Konténer vs. virtuális gép<a class="headerlink" href="#kontener-vs-virtualis-gep" title="Permanent link">#</a></h2>
<h3 id="osztott-kernel">Osztott kernel<a class="headerlink" href="#osztott-kernel" title="Permanent link">#</a></h3>
<p>A vagrantos jegyzetben már beszéltünk a VM-ekről, így ezekre most külön nem térünk ki. A konténerek esetén lényeges különbség, hogy a host OS kernele kerül megosztásra a guest rendszerrel. A hosttól történő izolációt maga a kernel oldja meg különböző szoftveres trükkökkel. <br>
<img alt="vm_vs_container" src="../images/vm_vs_container.png" /><br>
<small>(Forrás: https://d1bbu1rz26yvjt.cloudfront.net/wp-content/uploads/2020/01/13200917/vm_vs_container-1170x550.png)</small><br>
Ebből következik, hogy a konténerben csak olyan OS futhat ami a host rendszer kernele meg tud hajtani. Tehát egy Debian host futtathat RPM alapú Linux konténereket is, hiszen a kernelük egyezik.</p>
<h3 id="minimal-os-distroless-kontener">Minimal OS &amp; distroless konténer<a class="headerlink" href="#minimal-os-distroless-kontener" title="Permanent link">#</a></h3>
<p>Az <strong>általunk tárgyalt Dockert használó konténerek</strong> nem teljesértékű operációs rendszereket tartalmaznak. Csak a legminimálisabb dolgokat tartalmazzák, melyek az adott szerver vagy alkalmazás futtatásához szükségesek.</p>
<h2 id="komponensek">Komponensek<a class="headerlink" href="#komponensek" title="Permanent link">#</a></h2>
<h3 id="docker-halozat">Docker hálózat<a class="headerlink" href="#docker-halozat" title="Permanent link">#</a></h3>
<p>A kurzus során a birdge hálózat típust fogjuk használni. Ez azt jelenti, hogy a konténerek egy virtuális, szeparált hálózathoz kapcsolódnak. A dockerrel fogjuk szabályozni, hogy az egyes konténerek portjai a host gép mely portjaira továbbítódjanak. Ezen a porton lehet majd elérni azokat akár a hostról akár a hálózatról.</p>
<h3 id="volume">Volume<a class="headerlink" href="#volume" title="Permanent link">#</a></h3>
<p>A konténerek fontos tulajdonsága, hogy könnyen eldobhatóak és újra létrehozhatóak. Azonban amikor nem stateless egy konténer, például adatbázist futtatunk benne, akkor valahogy az adatoknak <strong>túl kell élni a konténer lecserélését</strong>. Erre a volume a megoldás. Kijelölünk egy fájlt vagy mappát a konténerben és egy docker volumera kötjük. Ekkor ez a fájl vagy mappa a konténer által izolált területen kívülre kerül a host gépen és így megmarad a konténer megszűnése után is.</p>
<h3 id="secret">Secret<a class="headerlink" href="#secret" title="Permanent link">#</a></h3>
<p>Ha biztonságosan szeretnénk tárolni jelszavakat vagy kulcsokat a Dockerben, valamint ezeket fel szeretnénk használni egy-egy konténerben, akkor secret objektumokat definiálunk. Ezek titkosítva tárolják az adatokat, a konténerbe pedig titkosítatlan szöveges fájl formájában teszik elérhetővé ezeket.</p>
<h3 id="image">Image<a class="headerlink" href="#image" title="Permanent link">#</a></h3>
<p>A konténerek Docker imageből indulnak ki és ezekre építkezünk. Egy Docker fileban miután megjelöltük a kiinduló állapotot, különböző shell parancsokkal konfiguráljuk az általunk aztán buildelt imaget. A konténer ezt az buildet imaget klónozza és futtatja, példányosítja ha úgy tetszik. Természetesen vannak előre elkészített imagek, melyekre nem építkezünk hanem csak futtatjuk. Ilyenek például az adatbázisok, CMS rendszerek, Cloud drive alkalmazások... stb. </p>
<h3 id="folyamat">Folyamat<a class="headerlink" href="#folyamat" title="Permanent link">#</a></h3>
<ul>
<li>Létrehozunk egy Dockerfilet és a kiindulási alapot addig módosítjuk míg az általunk futtatni kívánt kódot végre nem hajtja indításkor.</li>
<li>Ezt a fájlt buildeljük. A <strong><em>verzió</em></strong> jelölés hivatalos angol neve a <strong><em>tag</em></strong>, viszont így érthetőbb a funkciója.</li>
</ul>
<pre><code>docker build -t ___image_neve:verzio___ .
</code></pre>
<ul>
<li>Futtatjuk ezt az imaget.</li>
</ul>
<pre><code>docker run -d --name ___kontener_neve___ ___image_neve:verzio___
</code></pre>
<h2 id="docker-compose">Docker Compose<a class="headerlink" href="#docker-compose" title="Permanent link">#</a></h2>
<p>Tekinthetjük a Docker egyfajta Vagrantfilejának. Egy összegző, YML mely a konténeres infrastruktúra összes elemét leírja. Definiálunk benne konténereket, port nyitásokat, volumeokat és hálózatokat. Egy fájlal kezelhetővé válik így több dockeres elem.<br>
Compose fájl futtatása:</p>
<pre><code>docker compose -f compose-file.yml up -d
</code></pre>
<p><br>
Compose fájl leállítása (a volumeokat és secreteket nem törli):</p>
<pre><code>docker compose -f compose-file.yml down
</code></pre>
<h2 id="swarm">Swarm<a class="headerlink" href="#swarm" title="Permanent link">#</a></h2>
<p>Több szerver klaszterbe kötésére a Docker swarm szolgál. Ilyenkor a rendszer automatikusan osztja el a rendelkezésre álló erőforrások közt a konténerek futtatását.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>